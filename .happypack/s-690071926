'use strict';

/**
 * script loader for modal or html segment loaded by ajax
 */
var script = function script(scripts, fn, target) {
  if (!scripts.length) return;
  target = !target ? document.getElementsByTagName('body')[0] : target;
  (function callback(s) {
    s = scripts.shift();
    !scripts.length ? loadJs(s, fn, target) : loadJs(s, callback, target);
  })();
};

var loadJs = function loadJs(path, fn, target) {
  var elem = document.createElement('script'),
      loaded = void 0;
  elem.onload = elem.onerror = elem.onreadystatechange = function () {
    if (elem.readyState && !/^c|loade/.test(elem.readyState) || loaded) {
      return;
    }

    elem.onload = elem.onreadystatechange = null;
    loaded = 1;
    fn();
  };
  elem.async = 1;
  elem.src = path;
  target.appendChild(elem);
};

window['script'] = script;